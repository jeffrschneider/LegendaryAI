<!DOCTYPE html>
<html>
<head>
<title>Legendary AI WebConsole</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<textarea id="input"></textarea>
<button id="wordCorrect">fix</button>
<div id="WCoutput"></div>
<script>
"use strict";
const encode = function(str) {return encodeURIComponent(str).replace(/[!'()*]/g, function(c) {return '%' + c.charCodeAt(0).toString(16);});};
$(document).ready(function(){
  console.log("document ready");
  $("#wordCorrect").click(function(){
    console.log("clicked");
    $.get("WordTupleConnection/wordCorrect/?flawedString=" + encode(document.getElementById("input").value), function(data, status, xhr){
      console.log("status: " + status );
      console.log(data);
      data = JSON.parse(data);
      switch(data.statusCode) {
        case 0:
          alert("processing delay");
          return;
        case 1:
          var k = "<p>" + data.output + "<p><table><thead><tr><th>index</th><th>Word 1</th><th>Word 2</th></tr></thead><tbody>";
          for (var index = 0; index < data.points.length; index++) {
            k = k + (("<tr><td>" + (data.points[index] + "</td><td>")) + ((data.words[(data.points[index])-1] + "</td><td>") + (data.words[data.points[index]] + "</td></tr>")));
          }
          document.getElementById("WCoutput").innerHTML = k + "</tbody></table>";
          return;
        case -1:
        default:
          document.getElementById("WCoutput").innerHTML = JSON.stringify(data);
          return;
      }
    });
  });
});
</script>
</body>
</html>
